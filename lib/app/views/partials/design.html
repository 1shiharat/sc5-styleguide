<div class="sg design"
  ng-class="designerTool.isVisible ? 'sg-visible' : 'sg-hidden' ">
  <div class="handle"
    ng-click="designerTool.isVisible = !designerTool.isVisible">
    Designer Tools
  </div>
  <div class="sg design-content" ng-click="$event.stopPropagation()">
    <a class="sg" ng-click="showRelated = true" ng-hide="showRelated">Show only related variables</a>
    <a class="sg" ng-click="showRelated = false" ng-show="showRelated">Show all variables</a>
    <h3 class="sg" ng-show="showRelated">{{currentReference.section.reference}} {{currentReference.section.header}}</h3>
    <h3 class="sg" ng-hide="showRelated">All variables</h3>
    <ul>
      <li ng-hide="showRelated" ng-repeat="variable in variables">
        <div sg-variable></div>
      </li>
      <li ng-if="showRelated" ng-repeat="variable in filteredItems = (variables | filterRelated: currentReference.section.variables)">
        <div sg-variable></div>
      </li>
      <li ng-if="showRelated" ng-show="!filteredItems.length">This section does not contain related variables.</li>
    </ul>
    <div class="sg action-footer">
      <button class="sg button primary" ng-click="saveVariables()">Save changes</button>
      <button class="sg button" ng-click="resetLocal()">Reset local changes</button>
    </div>
  </div>
</div>
